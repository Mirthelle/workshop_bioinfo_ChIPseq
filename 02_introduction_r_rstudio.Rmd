---
title: "Introduction to R and RStudio"
author: "Mireia Ramos-Rodriguez"
date: "March 14, 2019"
output: 
  unilur::tutorial_html_solution: 
    theme: cerulean
    toc: TRUE
    toc_float: TRUE
    number_sections: TRUE
  unilur::tutorial_pdf: default
  unilur::tutorial_pdf_solution: 
    latex_engine: xelatex
  unilur::tutorial_html: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

knitr::opts_template$set(solution = list(box.title = "Look at the result",
                                         box.body = list(fill = "#ACFFAF4C"),
                                         box.collapse = TRUE,
                                         box.icon = "fa-lightbulb"),
                         alert = list(box.title = "Watch out!",
                                      box.body = list(fill = "#fa5b42", colour = "#fdf6d4"),
                                      box.collapse = TRUE,
                                      box.icon = "fa-exclamation-triangle"),
                         tip = list(box.title = "Pro-tip",
                                      box.body = list(fill = "lightblue"),
                                      box.collapse = TRUE,
                                      box.icon = "fa-star"),
                         exercise = list(box.title = "Exercise",
                                      box.body = list(fill = "plum"),
                                      box.collapse = TRUE,
                                      box.icon = "fa-pencil"))
```

# Introduction
__R__ is a programming language designed originally for performing statistical analyses. However, it's potential has been increased and nowadays it can be used for general data analysis, creating atractive plots or even for creating websites! You can download R from the official repository: [CRAN](https://www.r-project.org/). 

> If you have used spreadsheets to calculate stuff, you have already programmed.

In R, you can assign values to variables using `<-`. You don't have to type it everytime, just `Alt`+`-`!

```{r}
variable <- 2342
variable
```

You can use R from the unix command line or download an Integrated Development Environment (IDE) such as __RStudio__. 

# Working with R in RStudio

```{r, echo=FALSE, fig.cap="RStudio overview. Source: http://www.sthda.com/english/wiki/r-basics-quick-and-easy", fig.align="center"}
knitr::include_graphics("http://www.sthda.com/sthda/RDoc/images/rstudio.png")
```

1. __Code editor__. In your code editor you can create, open and save your `Rscripts`. Write your code and run it whenever you want using `Ctrl + Enter`.
2. __R Console__. This is where your R code is ran. You can run it from the code editor or directly typing things in the console.
3. __Environment and History__. Here you can find the objects and variables that are loaded in R and the history of commands you have ran.
4. __Plots, help, files__. All plots you generate and R documentation will appear in this pane.

# R basics
## Data types
The basic types of variables that can be represented in R are the following:

- _Numeric_. `332`, `0.234`.
- _Character_. `"Barcelona"`, `"woman"`. A special type of character is the class _factor_.
- _Logical_. `TRUE` or `FALSE`.
    
You can check the type of variable using `class()`.

```{block, opts.label="exercise"}
Create one variable of each of the above-mentioned basic types and check that the type is correct using the `class()` function.
```


```{r, solution=TRUE}
var <- "text" # character
class(var)

var <- 3242 # numeric
class(var)

var <- TRUE # logical
class(var)
```


## Arithmetic operators

Operator    | Description
------------|---------------
`+`	        | addition
`-`	        | subtraction
`*`	        | multiplication
`/`	        | division
`^` or `**`	| exponentiation

```{r}
3+4*5.2/2^2
```


## Logical operators

Operator | Description
---------|-------------------
`>`	     | greater than
`>=`     | greater than or equal to
`==`     |	exactly equal to
`!=`     | not equal to

```{r}
# Works with numerics
3 > 2

# And also with characters
"class"=="class"
```


## Data structures

We can combine several data types into more complex structures. The different structures one can create in R are the following:

- __Vectors__. Consists on a concatenation `c()` of values. The type of all values should be the same.
```{r}
vector <- c(0,1,2,3,4,6)
vector
```

- __Matrices__. Are basically vectors, but with 2 dimensions (rows and columns). You can create a matrix using `matrix()`. You can check which arguments you can pass to the matrix function typing `?matrix` or `help(matrix)`
```{r}
mat <- matrix(vector, nrow=2)
mat
```

```{block, opts.label="exercise"}
As an example we just generated a vector of numbers. Try to generate a __vector with letters (characters)__ from 'a' to 'f' and then convert it to a matrix with 2 columns.
```

```{r, solution=TRUE}
vector <- c('a', 'b', 'c', 'd', 'e', 'f')
mat <- matrix(vector, ncol=2)
mat
```


- __Dataframes__. Dataframes are very much like spreadsheets: each column is information on one variable and each row is an instance (for example, a patient). When constructing a dataframe, you can use different vectors to represent different information. The only requierement is that all vectors have to be the same length.

```{r}
patients <- data.frame(patientID=1:4,
                       gender=c("male", "female", "male", "female"),
                       age=c(23, 45, 55, 22),
                       dead=c(F, T, T, F))
patients

patients$age # to select one column
```


- __Lists__. Lists are concatenations of any data type or data structure. The first element of your list can be a vector, the second one a matrix and the third one a data frame. You can number elements in your list and access each data structure using `listName[[1]]`. 

```{r}
list <- list(name="donors",
             patientList=patients)
list

list[[1]]
list[["name"]]
```


## Functions

There are many basic functions that are already loaded into R. For example, `data.frame()` is a function that generates data.frames and `help()` is a function that loads the manual for a specific R function. 

You can create you own functions in R as follows:

```{r}
sq <- function(x) {
  square <- x*x
  return(square)
}

sq(2)
```

Functions are approppriate when you are copy&pasting operations many times, but changing tiny details. It might be more time consuming to create a function, but then you an run it with the parameters you want without any additional effort.

Many times, there are functions out there for the things you want to do. This functions are wrapped in __packages__ and you can download them and use them freely!

# Functions and packages

CRAN
Bioconductor


# Loading data



# Additional resources
- [Datacamp: Introduction to R](https://www.datacamp.com/courses/free-introduction-to-r)
- [Beginner's guide to R: Introduction](https://www.computerworld.com/article/2497143/business-intelligence/business-intelligence-beginner-s-guide-to-r-introduction.html)
- [`swirl`, Learn R, in R](https://swirlstats.com/)
- [R for Data Science](https://r4ds.had.co.nz/)
- [R style guide](http://adv-r.had.co.nz/Style.html)